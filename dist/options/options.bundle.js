(()=>{"use strict";var e=[],t=[],l=document.getElementById("blacklist_showed"),n=document.getElementById("whitelist_showed"),s=document.getElementById("delete_b"),c=document.getElementById("delete_w");function i(i){if("black"==i)if(0==e.length)s.style.display="none",l.innerHTML="<span class='row center'>現在黑名單空白哦</span>";else{s.style.display="",l.innerHTML="";for(let t=0;t<e.length;t++){const n=e[t];l.insertAdjacentHTML("afterbegin",`<label class="item">\n          <input type="checkbox" id="b${t}" class="check" value="${n}"/>\n          <span class="list_text">${n}</span>\n        </label>`)}}else if("white"==i)if(0==t.length)c.style.display="none",n.innerHTML="<span class='row center'>現在白名單空白哦</span>";else{c.style.display="",n.innerHTML="";for(let e=0;e<t.length;e++){const l=t[e];n.insertAdjacentHTML("afterbegin",`<label class="item">\n          <input type="checkbox" id="w${e}" class="check" value="${l}"/>\n          <span class="list_text">${l}</span>\n        </label>`)}}}chrome.storage.sync.get(null,(l=>{e=l.blacklist,t=l.whitelist,console.log(e),console.log(t),i("black"),i("white"),document.getElementById("delete_from_blacklist").addEventListener("click",(()=>{let t=[];for(let l=0;l<e.length;l++){const e=document.getElementById("b"+l);e.checked&&t.push(e.value)}e=e.filter((e=>-1===t.indexOf(e))),i("black")})),document.getElementById("delete_from_whitelist").addEventListener("click",(()=>{let e=[];for(let l=0;l<t.length;l++){const t=document.getElementById("w"+l);t.checked&&e.push(t.value)}t=t.filter((t=>-1===e.indexOf(t))),i("white")})),document.getElementById("block_it").addEventListener("click",(()=>{let t=document.getElementById("add_url").value,l=1;for(let n=0;n<e.length;n++)if(t==e[n]){alert("此網站已在名單中！！"),l=0;break}l&&(e.push(t),console.log("this is blacklist:"),console.log(e),i("black"))})),document.getElementById("allow_it").addEventListener("click",(()=>{let e=document.getElementById("add_url").value,l=1;for(let n=0;n<t.length;n++)if(e==t[n]){alert("此網站已在名單中！！"),l=0;break}l&&(t.push(e),console.log("this is whitelist:"),console.log(t),i("white"))})),document.getElementById("update_list").addEventListener("click",(()=>{let l=new Object;l.blacklist=e,l.whitelist=t,console.log(l),chrome.storage.sync.set(l),chrome.runtime.reload()}))}))})();